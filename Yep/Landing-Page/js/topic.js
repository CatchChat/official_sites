var base64Prefix,delay,isChinese,modulate,msg_pswpItems,pswpElement,topic_pswpItems;modulate=function(e,t,a,i,s){var n;if(n=i+(e-t)/(a-t)*(s-i),s>i){if(i>n)return i;if(n>s)return s}else{if(n>i)return i;if(s>n)return s}return n},isChinese=function(){return-1!==window.navigator.language.indexOf("zh")},delay=function(e,t){return setTimeout(t,e)},base64Prefix="data:image/jpeg;base64,",pswpElement=$(".pswp")[0],topic_pswpItems=[],msg_pswpItems=[],$(function(){var e,t;return t="https://park.catchchatchina.com/api/v2/circles/shared_messages",e="?token="+$.url("?token")+"&callback=?",$.getJSON(t+e,function(e){var t,a,i,s,n,r,o,d,l,p,u,c,m,h,g,b,f,w,v,_,k,y,x,C,I;switch(i=e.circle,k=e.topic,c=e.messages,d=k.kind,$(".topic .avatar").css("background-image","url("+k.user.avatar_url+")"),$(".topic .avatar").attr("username",k.user.username),$(".topic .nickname").html(k.user.nickname),$(".topic .time").html($.timeago(1e3*i.created_at)),k.body?$(".topic .text").html(k.body):$(".topic .text").hide(),"image"!==d&&$(".topic .images").remove(),d){case"image":for(v=k.attachments,r=0,l=v.length;l>r;r++)y=v[r],x=$.parseJSON(y.metadata),I=base64Prefix+x.thumbnail_string,$("<div/>").addClass("thumbnail").css("background-image","url("+I+")").appendTo(".images .thumbnails"),C={msrc:I,src:y.file.url,w:x.image_width,h:x.image_height},topic_pswpItems.push(C);$(".topic .images .thumbnails .thumbnail").on("tap",function(){var e,t;return t={index:$(this).index(),showHideOpacity:!0,history:!1,bgOpacity:.9,getThumbBoundsFn:function(e){var t,a,i;return i=$(".topic .images .thumbnails .thumbnail")[e],t=window.pageYOffset||document.documentElement.scrollTop,a=i.getBoundingClientRect(),{x:a.left,y:a.top+t,w:a.width}}},e=new PhotoSwipe(pswpElement,PhotoSwipeUI_Default,topic_pswpItems,t),delay(10,function(){return e.init()})});break;case"dribbble":_=k.attachments[0],$(".topic .dribbble").show(),$(".topic .dribbble img.shot").attr("src",_.media_url),$(".topic .dribbble a.link").html(_.title).attr("href",_.url)}for($(".chat").css("padding-top",$(".topic").css("height")),o=0,p=c.length;p>o;o++){switch(m=c[o],n=$(".template.cell").clone().removeClass("template"),s=n.find(".content"),n.find(".avatar").css("background-image","url("+m.sender.avatar_url+")"),n.find(".avatar").attr("username",m.sender.username),n.find(".nickname").html(m.sender.nickname),h=m.attachments[0],f=h?$.parseJSON(h.metadata):void 0,m.media_type){case"text":s.addClass("text").html(m.text_content);break;case"image":g=$.parseJSON(h.metadata),b=base64Prefix+g.blurred_thumbnail_string,s.addClass("image").append($("<img/>",{src:h.file.url})).css("background-image","url("+b+")"),w={msrc:b,src:h.file.url,w:g.image_width,h:g.image_height},msg_pswpItems.push(w);break;case"audio":t=Math.round(f.audio_duration),a=$("<audio controls>",{src:h.file.url,preload:"auto"}),a.append($("<source>",{src:h.file.url,type:"audio/mpeg"})),s.addClass("audio").append(a),s.addClass("audio").append($("<button/>")),s.addClass("audio").append($("<progress/>",{max:100,value:0}).css("width",20*t+"px")),s.addClass("audio").append($("<label/>").html(t+"â€³"));break;case"location":u={key:"P8qeoPmMSc6FKpMvbLKWVrR0",lng:m.longitude,lat:m.latitude,address:m.text_content,width:200,height:100,zoom:16},u.img="https://api.map.baidu.com/staticimage?center="+u.lng+","+u.lat+"&width="+u.width+"&height="+u.height+"&zoom="+u.zoom+"&ak="+u.key,u.url="https://maps.google.cn/maps?q="+u.lat+","+u.lng+"&z="+u.zoom+"&ll="+u.lat+","+u.lng,s.attr("href",u.url),s.attr("target","_blank"),s.addClass("location").css({width:u.width+"px",height:u.height+"px",backgroundImage:"url("+u.img+")"}),s.append($("<div/>").addClass("marker")),u.address&&s.append($("<div/>").addClass("address").html(u.address))}n.appendTo(".table")}return $(".chat .bubble .image").on("tap",function(){var e,t;return t={index:$(".chat .bubble .image").index($(this)),showHideOpacity:!0,history:!1,bgOpacity:.9,getThumbBoundsFn:function(e){var t,a,i;return i=$(".chat .bubble .image")[e],t=window.pageYOffset||document.documentElement.scrollTop,a=i.getBoundingClientRect(),{x:a.left,y:a.top+t,w:a.width}}},e=new PhotoSwipe(pswpElement,PhotoSwipeUI_Default,msg_pswpItems,t),e.init()}),$(".avatar").click(function(){var e;return e=$(this).attr("username"),e?window.open("https://soyep.com/"+e):void 0}),$(document).scroll(function(){return $(this).scrollTop()>=$(this).height()-$(window).height()-100?$(".footer .popup").addClass("show"):$(".footer .popup").removeClass("show")}),$(".chat .bubble .audio").on("tap",function(){var e,t,a;return a=$.media($(this).find("audio")),t=$(this).find("button"),e=$(this).find("progress"),a.playPause(),a.play(function(){return t.addClass("playing")}),a.pause(function(){return t.removeClass("playing")}),a.ended(function(){return t.removeClass("playing"),a.stop()}),a.time(function(){var t;return t=modulate(this.time(),0,this.duration(),0,100),e.attr("value",t)})})}),os.ios&&$(".android").hide(),os.android?$(".ios").hide():void 0});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRvcGljLmNvZmZlZSIsInRvcGljLmpzIl0sIm5hbWVzIjpbImJhc2U2NFByZWZpeCIsImRlbGF5IiwiaXNDaGluZXNlIiwibW9kdWxhdGUiLCJtc2dfcHN3cEl0ZW1zIiwicHN3cEVsZW1lbnQiLCJ0b3BpY19wc3dwSXRlbXMiLCJ2YWx1ZSIsImZyb21Mb3ciLCJmcm9tSGlnaCIsInRvTG93IiwidG9IaWdoIiwicmVzdWx0Iiwid2luZG93IiwibmF2aWdhdG9yIiwibGFuZ3VhZ2UiLCJpbmRleE9mIiwibXMiLCJmdW5jIiwic2V0VGltZW91dCIsIiQiLCJwYXJhbSIsInVybCIsImdldEpTT04iLCJyZXNwb25zZSIsImF1ZGlvX2R1cmF0aW9uIiwiYXVkaW9fZWxlbWVudCIsImNpcmNsZSIsImNvbnRlbnQiLCJlbGVtZW50IiwiaSIsImoiLCJraW5kIiwibGVuIiwibGVuMSIsIm1hcCIsIm1lc3NhZ2VzIiwibXNnIiwibXNnX2F0dGFjaG1lbnQiLCJtc2dfaW1nX21ldGFkYXRhIiwibXNnX2ltZ190aHVtYm5haWxfYmx1ciIsIm1zZ19tZXRhZGF0YSIsIm1zZ19wc3dwSXRlbSIsInJlZiIsInNob3QiLCJ0b3BpYyIsInRvcGljX2F0dGFjaG1lbnQiLCJ0b3BpY19tZXRhZGF0YSIsInRvcGljX3Bzd3BJdGVtIiwidG9waWNfdGh1bWJuYWlsIiwiY3NzIiwidXNlciIsImF2YXRhcl91cmwiLCJhdHRyIiwidXNlcm5hbWUiLCJodG1sIiwibmlja25hbWUiLCJ0aW1lYWdvIiwiY3JlYXRlZF9hdCIsImJvZHkiLCJoaWRlIiwicmVtb3ZlIiwiYXR0YWNobWVudHMiLCJsZW5ndGgiLCJwYXJzZUpTT04iLCJtZXRhZGF0YSIsInRodW1ibmFpbF9zdHJpbmciLCJhZGRDbGFzcyIsImFwcGVuZFRvIiwibXNyYyIsInNyYyIsImZpbGUiLCJ3IiwiaW1hZ2Vfd2lkdGgiLCJoIiwiaW1hZ2VfaGVpZ2h0IiwicHVzaCIsIm9uIiwidG9wY19nYWxsZXJ5IiwidG9waWNfcHN3cE9wdGlvbnMiLCJpbmRleCIsInRoaXMiLCJzaG93SGlkZU9wYWNpdHkiLCJoaXN0b3J5IiwiYmdPcGFjaXR5IiwiZ2V0VGh1bWJCb3VuZHNGbiIsInBhZ2VZU2Nyb2xsIiwicmVjdCIsInRodW1ibmFpbCIsInBhZ2VZT2Zmc2V0IiwiZG9jdW1lbnQiLCJkb2N1bWVudEVsZW1lbnQiLCJzY3JvbGxUb3AiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJ4IiwibGVmdCIsInkiLCJ0b3AiLCJ3aWR0aCIsIlBob3RvU3dpcGUiLCJQaG90b1N3aXBlVUlfRGVmYXVsdCIsImluaXQiLCJzaG93IiwibWVkaWFfdXJsIiwidGl0bGUiLCJjbG9uZSIsInJlbW92ZUNsYXNzIiwiZmluZCIsInNlbmRlciIsIm1lZGlhX3R5cGUiLCJ0ZXh0X2NvbnRlbnQiLCJibHVycmVkX3RodW1ibmFpbF9zdHJpbmciLCJhcHBlbmQiLCJNYXRoIiwicm91bmQiLCJwcmVsb2FkIiwidHlwZSIsIm1heCIsImtleSIsImxuZyIsImxvbmdpdHVkZSIsImxhdCIsImxhdGl0dWRlIiwiYWRkcmVzcyIsImhlaWdodCIsInpvb20iLCJpbWciLCJiYWNrZ3JvdW5kSW1hZ2UiLCJtc2dfZ2FsbGVyeSIsIm1zZ19wc3dwT3B0aW9ucyIsImNsaWNrIiwib3BlbiIsInNjcm9sbCIsImJhciIsImJ1dHRvbiIsInZvaWNlIiwibWVkaWEiLCJwbGF5UGF1c2UiLCJwbGF5IiwicGF1c2UiLCJlbmRlZCIsInN0b3AiLCJ0aW1lIiwicHJvZ3Jlc3MiLCJkdXJhdGlvbiIsIm9zIiwiaW9zIiwiYW5kcm9pZCJdLCJtYXBwaW5ncyI6IkFBQ0EsR0FBQUEsY0FBQUMsTUFBQUMsVUFBQUMsU0FBQUMsY0FBQUMsWUFBQUMsZUFBQUgsVUFBVyxTQUFDSSxFQUFPQyxFQUFTQyxFQUFVQyxFQUFPQyxHQUMzQyxHQUFBQyxFQUNBLElBREFBLEVBQVNGLEdBQVdILEVBQVFDLElBQVlDLEVBQVdELElBQWFHLEVBQVNELEdBQzlEQyxFQUFSRCxFQUFILENBQ0UsR0FBeUJB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ZUFBLEdBQVFuSCxFQUFFb0gsTUFBTXBILEVBQUU2RCxNQUFNMEIsS0FBSyxVQUM3QjJCLEVBQVNsSCxFQUFFNkQsTUFBTTBCLEtBQUssVUFDdEIwQixFQUFNakgsRUFBRTZELE1BQU0wQixLQUFLLFlBRW5CNEIsRUFBTUUsWUFFTkYsRUFBTUcsS0FBSyxXQzlCVCxNRCtCQUosR0FBT25FLFNBQVMsYUFFbEJvRSxFQUFNSSxNQUFNLFdDOUJWLE1EK0JBTCxHQUFPNUIsWUFBWSxhQUVyQjZCLEVBQU1LLE1BQU0sV0M3QlYsTUQ4QkFOLEdBQU81QixZQUFZLFdBQ25CNkIsRUFBTU0sU0FFUk4sRUFBTU8sS0FBSyxXQUNULEdBQUFDLEVDN0JBLE9ENkJBQSxHQUFXNUksU0FBUzhFLEtBQUs2RCxPQUFRLEVBQUc3RCxLQUFLK0QsV0FBWSxFQUFHLEtBQ3hEWCxFQUFJaEYsS0FBSyxRQUFTMEYsU0FPQUUsR0FBR0MsS0FBM0I5SCxFQUFFLFlBQVl3QyxPQUNNcUYsR0FBR0UsUUFBdkIvSCxFQUFFLFFBQVF3QyxPQUFWIiwiZmlsZSI6InRvcGljLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIyAtLS0gRlVOQ1RJT04gREVDTEFSRSAtLS1cbm1vZHVsYXRlID0gKHZhbHVlLCBmcm9tTG93LCBmcm9tSGlnaCwgdG9Mb3csIHRvSGlnaCkgLT5cbiAgcmVzdWx0ID0gdG9Mb3cgKyAoKCh2YWx1ZSAtIGZyb21Mb3cpIC8gKGZyb21IaWdoIC0gZnJvbUxvdykpICogKHRvSGlnaCAtIHRvTG93KSlcbiAgaWYgdG9Mb3cgPCB0b0hpZ2hcbiAgICByZXR1cm4gdG9Mb3cgaWYgcmVzdWx0IDwgdG9Mb3dcbiAgICByZXR1cm4gdG9IaWdoIGlmIHJlc3VsdCA+IHRvSGlnaFxuICBlbHNlXG4gICAgcmV0dXJuIHRvTG93IGlmIHJlc3VsdCA+IHRvTG93XG4gICAgcmV0dXJuIHRvSGlnaCBpZiByZXN1bHQgPCB0b0hpZ2hcbiAgcmVzdWx0XG5cbmlzQ2hpbmVzZSA9IC0+IHJldHVybiB3aW5kb3cubmF2aWdhdG9yLmxhbmd1YWdlLmluZGV4T2YoXCJ6aFwiKSBpc250IC0xXG5cbmRlbGF5ID0gKG1zLCBmdW5jKSAtPiBzZXRUaW1lb3V0IGZ1bmMsIG1zXG5cblxuXG5cblxuIyAtLS0gVkFSSUFCTEVTIC0tLVxuYmFzZTY0UHJlZml4ID0gXCJkYXRhOmltYWdlL2pwZWc7YmFzZTY0LFwiXG5cbnBzd3BFbGVtZW50ID0gJCgnLnBzd3AnKVswXVxudG9waWNfcHN3cEl0ZW1zID0gW11cbm1zZ19wc3dwSXRlbXMgPSBbXVxuXG5cblxuXG5cbiQgLT5cbiMgLS0tIERBVEEgUkVOREVSSU5HIC0tLVxuICB1cmwgPSBcImh0dHBzOi8vcGFyay5jYXRjaGNoYXRjaGluYS5jb20vYXBpL3YyL2NpcmNsZXMvc2hhcmVkX21lc3NhZ2VzXCJcbiAgcGFyYW0gPSBcIj90b2tlbj1cIiArICQudXJsKFwiP3Rva2VuXCIpICsgXCImY2FsbGJhY2s9P1wiXG5cbiAgJC5nZXRKU09OIHVybCArIHBhcmFtLCAocmVzcG9uc2UpIC0+XG4gICAgY2lyY2xlID0gcmVzcG9uc2UuY2lyY2xlXG4gICAgdG9waWMgPSByZXNwb25zZS50b3BpY1xuICAgIG1lc3NhZ2VzID0gcmVzcG9uc2UubWVzc2FnZXNcbiAgICBraW5kID0gdG9waWMua2luZFxuXG4gICAgIyBBdmF0YXJcbiAgICAkKFwiLnRvcGljIC5hdmF0YXJcIikuY3NzIFwiYmFja2dyb3VuZC1pbWFnZVwiLCBcInVybCgje3RvcGljLnVzZXIuYXZhdGFyX3VybH0pXCJcbiAgICAkKFwiLnRvcGljIC5hdmF0YXJcIikuYXR0ciBcInVzZXJuYW1lXCIsIHRvcGljLnVzZXIudXNlcm5hbWVcblxuICAgICMgTmlja25hbWVcbiAgICAkKFwiLnRvcGljIC5uaWNrbmFtZVwiKS5odG1sIHRvcGljLnVzZXIubmlja25hbWVcblxuICAgICMgVGltZVxuICAgICQoXCIudG9waWMgLnRpbWVcIikuaHRtbCAkLnRpbWVhZ28oY2lyY2xlLmNyZWF0ZWRfYXQgKiAxMDAwKVxuXG4gICAgIyBUZXh0XG4gICAgaWYgbm90IHRvcGljLmJvZHkgdGhlbiAkKFwiLnRvcGljIC50ZXh0XCIpLmhpZGUoKVxuICAgIGVsc2UgJChcIi50b3BpYyAudGV4dFwiKS5odG1sIHRvcGljLmJvZHlcblxuICAgIGlmIGtpbmQgaXNudCBcImltYWdlXCIgdGhlbiAkKFwiLnRvcGljIC5pbWFnZXNcIikucmVtb3ZlKClcblxuICAgIHN3aXRjaCBraW5kXG4gICAgICAjIHdoZW4gXCJ0ZXh0XCJcbiAgICAgIHdoZW4gXCJpbWFnZVwiXG4gICAgICAgICMgSW1hZ2UgVHVtYm5haWxzXG4gICAgICAgIGZvciB0b3BpY19hdHRhY2htZW50IGluIHRvcGljLmF0dGFjaG1lbnRzXG4gICAgICAgICAgdG9waWNfbWV0YWRhdGEgPSAkLnBhcnNlSlNPTiB0b3BpY19hdHRhY2htZW50Lm1ldGFkYXRhXG4gICAgICAgICAgdG9waWNfdGh1bWJuYWlsID0gYmFzZTY0UHJlZml4ICsgdG9waWNfbWV0YWRhdGEudGh1bWJuYWlsX3N0cmluZ1xuICAgICAgICAgICQoXCI8ZGl2Lz5cIilcbiAgICAgICAgICAuYWRkQ2xhc3MgXCJ0aHVtYm5haWxcIlxuICAgICAgICAgIC5jc3MgXCJiYWNrZ3JvdW5kLWltYWdlXCIsIFwidXJsKCN7dG9waWNfdGh1bWJuYWlsfSlcIlxuICAgICAgICAgIC5hcHBlbmRUbyhcIi5pbWFnZXMgLnRodW1ibmFpbHNcIilcblxuICAgICAgICAgIHRvcGljX3Bzd3BJdGVtID0ge1xuICAgICAgICAgICAgbXNyYzogdG9waWNfdGh1bWJuYWlsXG4gICAgICAgICAgICBzcmM6ICB0b3BpY19hdHRhY2htZW50LmZpbGUudXJsXG4gICAgICAgICAgICB3OiAgICB0b3BpY19tZXRhZGF0YS5pbWFnZV93aWR0aFxuICAgICAgICAgICAgaDogICAgdG9waWNfbWV0YWRhdGEuaW1hZ2VfaGVpZ2h0XG4gICAgICAgICAgfVxuICAgICAgICAgIHRvcGljX3Bzd3BJdGVtcy5wdXNoIHRvcGljX3Bzd3BJdGVtXG5cbiAgICAgICAgIyBJbWFnZSBHYWxsZXJ5XG4gICAgICAgICQoXCIudG9waWMgLmltYWdlcyAudGh1bWJuYWlscyAudGh1bWJuYWlsXCIpLm9uIFwidGFwXCIsIC0+XG5cbiAgICAgICAgICB0b3BpY19wc3dwT3B0aW9ucyA9IHtcbiAgICAgICAgICAgIGluZGV4OiAkKHRoaXMpLmluZGV4KClcbiAgICAgICAgICAgIHNob3dIaWRlT3BhY2l0eTogdHJ1ZVxuICAgICAgICAgICAgaGlzdG9yeTogZmFsc2VcbiAgICAgICAgICAgIGJnT3BhY2l0eTogMC45XG4gICAgICAgICAgICBnZXRUaHVtYkJvdW5kc0ZuOiAoaW5kZXgpLT5cbiAgICAgICAgICAgICAgdGh1bWJuYWlsID0gJChcIi50b3BpYyAuaW1hZ2VzIC50aHVtYm5haWxzIC50aHVtYm5haWxcIilbaW5kZXhdXG4gICAgICAgICAgICAgIHBhZ2VZU2Nyb2xsID0gd2luZG93LnBhZ2VZT2Zmc2V0IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3BcbiAgICAgICAgICAgICAgcmVjdCA9IHRodW1ibmFpbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVxuICAgICAgICAgICAgICByZXR1cm4ge3g6cmVjdC5sZWZ0LCB5OnJlY3QudG9wICsgcGFnZVlTY3JvbGwsIHc6cmVjdC53aWR0aH1cbiAgICAgICAgICB9XG4gICAgICAgICAgdG9wY19nYWxsZXJ5ID0gbmV3IFBob3RvU3dpcGUoIHBzd3BFbGVtZW50LCBQaG90b1N3aXBlVUlfRGVmYXVsdCwgdG9waWNfcHN3cEl0ZW1zLCB0b3BpY19wc3dwT3B0aW9ucylcbiAgICAgICAgICBkZWxheSAxMCwgLT4gdG9wY19nYWxsZXJ5LmluaXQoKVxuXG4gICAgICAjIHdoZW4gXCJ2aWRlb1wiXG4gICAgICAjIHdoZW4gXCJhdWRpb1wiXG4gICAgICAjIHdoZW4gXCJsb2NhdGlvblwiXG4gICAgICB3aGVuIFwiZHJpYmJibGVcIlxuICAgICAgICBzaG90ID0gdG9waWMuYXR0YWNobWVudHNbMF1cblxuICAgICAgICAkKFwiLnRvcGljIC5kcmliYmJsZVwiKS5zaG93KClcblxuICAgICAgICAkKFwiLnRvcGljIC5kcmliYmJsZSBpbWcuc2hvdFwiKS5hdHRyIFwic3JjXCIsIHNob3QubWVkaWFfdXJsXG4gICAgICAgICQoXCIudG9waWMgLmRyaWJiYmxlIGEubGlua1wiKS5odG1sIHNob3QudGl0bGVcbiAgICAgICAgLmF0dHIgXCJocmVmXCIsIHNob3QudXJsXG4gICAgICAjIHdoZW4gXCJnaXRodWJcIlxuICAgICAgIyB3aGVuIFwiYXBwbGVfbXVzaWNcIlxuICAgICAgIyB3aGVuIFwiYXBwbGVfbW92aWVcIlxuICAgICAgIyB3aGVuIFwiYXBwbGVfZWJvb2tcIlxuXG5cblxuXG5cblxuXG5cblxuXG5cbiAgICAjIExhdGVzdCBDb252ZXJzYXRpb25zXG4gICAgJChcIi5jaGF0XCIpLmNzcyBcInBhZGRpbmctdG9wXCIsICQoXCIudG9waWNcIikuY3NzIFwiaGVpZ2h0XCJcblxuICAgIGZvciBtc2cgaW4gbWVzc2FnZXNcblxuICAgICAgZWxlbWVudCA9ICQoXCIudGVtcGxhdGUuY2VsbFwiKS5jbG9uZSgpLnJlbW92ZUNsYXNzKFwidGVtcGxhdGVcIilcbiAgICAgIGNvbnRlbnQgPSBlbGVtZW50LmZpbmQoXCIuY29udGVudFwiKVxuXG4gICAgICBlbGVtZW50LmZpbmQoXCIuYXZhdGFyXCIpLmNzcyBcImJhY2tncm91bmQtaW1hZ2VcIiwgXCJ1cmwoI3ttc2cuc2VuZGVyLmF2YXRhcl91cmx9KVwiXG4gICAgICBlbGVtZW50LmZpbmQoXCIuYXZhdGFyXCIpLmF0dHIgXCJ1c2VybmFtZVwiLCBtc2cuc2VuZGVyLnVzZXJuYW1lXG5cbiAgICAgIGVsZW1lbnQuZmluZChcIi5uaWNrbmFtZVwiKS5odG1sKG1zZy5zZW5kZXIubmlja25hbWUpXG5cbiAgICAgIG1zZ19hdHRhY2htZW50ID0gbXNnLmF0dGFjaG1lbnRzWzBdXG4gICAgICBtc2dfbWV0YWRhdGEgPSBpZiBtc2dfYXR0YWNobWVudCB0aGVuICQucGFyc2VKU09OIG1zZ19hdHRhY2htZW50Lm1ldGFkYXRhIGVsc2UgdW5kZWZpbmVkXG5cblxuICAgICAgc3dpdGNoIG1zZy5tZWRpYV90eXBlXG4gICAgICAgIHdoZW4gXCJ0ZXh0XCJcbiAgICAgICAgICBjb250ZW50LmFkZENsYXNzKFwidGV4dFwiKS5odG1sKG1zZy50ZXh0X2NvbnRlbnQpXG5cbiAgICAgICAgd2hlbiBcImltYWdlXCJcbiAgICAgICAgICBtc2dfaW1nX21ldGFkYXRhID0gJC5wYXJzZUpTT04gbXNnX2F0dGFjaG1lbnQubWV0YWRhdGFcbiAgICAgICAgICBtc2dfaW1nX3RodW1ibmFpbF9ibHVyID0gYmFzZTY0UHJlZml4ICsgbXNnX2ltZ19tZXRhZGF0YS5ibHVycmVkX3RodW1ibmFpbF9zdHJpbmdcblxuICAgICAgICAgIGNvbnRlbnQuYWRkQ2xhc3MoXCJpbWFnZVwiKVxuICAgICAgICAgIC5hcHBlbmQgJChcIjxpbWcvPlwiLCBzcmM6IG1zZ19hdHRhY2htZW50LmZpbGUudXJsKVxuICAgICAgICAgIC5jc3MgJ2JhY2tncm91bmQtaW1hZ2UnLCBcInVybCgje21zZ19pbWdfdGh1bWJuYWlsX2JsdXJ9KVwiXG5cblxuICAgICAgICAgICMgSW1hZ2UgR2FsbGVyeSAtIENvbnZlcnNhdGlvblxuICAgICAgICAgIG1zZ19wc3dwSXRlbSA9IHtcbiAgICAgICAgICAgIG1zcmM6IG1zZ19pbWdfdGh1bWJuYWlsX2JsdXJcbiAgICAgICAgICAgIHNyYzogIG1zZ19hdHRhY2htZW50LmZpbGUudXJsXG4gICAgICAgICAgICB3OiBtc2dfaW1nX21ldGFkYXRhLmltYWdlX3dpZHRoXG4gICAgICAgICAgICBoOiBtc2dfaW1nX21ldGFkYXRhLmltYWdlX2hlaWdodFxuICAgICAgICAgIH1cbiAgICAgICAgICBtc2dfcHN3cEl0ZW1zLnB1c2ggbXNnX3Bzd3BJdGVtXG5cbiAgICAgICAgd2hlbiBcImF1ZGlvXCJcbiAgICAgICAgICBhdWRpb19kdXJhdGlvbiA9IE1hdGgucm91bmQgbXNnX21ldGFkYXRhLmF1ZGlvX2R1cmF0aW9uXG4gICAgICAgICAgYXVkaW9fZWxlbWVudCA9ICQoXCI8YXVkaW8gY29udHJvbHM+XCIsIHNyYzogbXNnX2F0dGFjaG1lbnQuZmlsZS51cmwsIHByZWxvYWQ6IFwiYXV0b1wiKVxuICAgICAgICAgIGF1ZGlvX2VsZW1lbnQuYXBwZW5kICQoXCI8c291cmNlPlwiLCBzcmM6IG1zZ19hdHRhY2htZW50LmZpbGUudXJsLCB0eXBlOiBcImF1ZGlvL21wZWdcIilcblxuICAgICAgICAgIGNvbnRlbnQuYWRkQ2xhc3MoXCJhdWRpb1wiKS5hcHBlbmQgYXVkaW9fZWxlbWVudFxuXG4gICAgICAgICAgY29udGVudC5hZGRDbGFzcyhcImF1ZGlvXCIpLmFwcGVuZCAkKFwiPGJ1dHRvbi8+XCIpXG4gICAgICAgICAgY29udGVudC5hZGRDbGFzcyhcImF1ZGlvXCIpLmFwcGVuZCAkKFwiPHByb2dyZXNzLz5cIiwgbWF4OiAxMDAsIHZhbHVlOiAwKS5jc3MgXCJ3aWR0aFwiLCBcIiN7YXVkaW9fZHVyYXRpb24gKiAyMH1weFwiXG4gICAgICAgICAgY29udGVudC5hZGRDbGFzcyhcImF1ZGlvXCIpLmFwcGVuZCAkKFwiPGxhYmVsLz5cIikuaHRtbChcIiN7YXVkaW9fZHVyYXRpb2594oCzXCIpXG5cbiAgICAgICAgd2hlbiBcImxvY2F0aW9uXCJcbiAgICAgICAgICBtYXAgPVxuICAgICAgICAgICAga2V5OiBcIlA4cWVvUG1NU2M2RktwTXZiTEtXVnJSMFwiXG4gICAgICAgICAgICBsbmc6IG1zZy5sb25naXR1ZGVcbiAgICAgICAgICAgIGxhdDogbXNnLmxhdGl0dWRlXG4gICAgICAgICAgICBhZGRyZXNzOiBtc2cudGV4dF9jb250ZW50XG4gICAgICAgICAgICB3aWR0aDogMjAwXG4gICAgICAgICAgICBoZWlnaHQ6IDEwMFxuICAgICAgICAgICAgem9vbTogMTZcblxuICAgICAgICAgIG1hcC5pbWcgPSBcImh0dHBzOi8vYXBpLm1hcC5iYWlkdS5jb20vc3RhdGljaW1hZ2U/Y2VudGVyPSN7bWFwLmxuZ30sI3ttYXAubGF0fSZ3aWR0aD0je21hcC53aWR0aH0maGVpZ2h0PSN7bWFwLmhlaWdodH0mem9vbT0je21hcC56b29tfSZhaz0je21hcC5rZXl9XCJcbiAgICAgICAgICBtYXAudXJsID0gXCJodHRwczovL21hcHMuZ29vZ2xlLmNuL21hcHM/cT0je21hcC5sYXR9LCN7bWFwLmxuZ30mej0je21hcC56b29tfSZsbD0je21hcC5sYXR9LCN7bWFwLmxuZ31cIlxuICAgICAgICAgICMgYWx0ZXJuYXRpdmU6XG4gICAgICAgICAgIyBtYXAudXJsID0gXCJodHRwczovL3d3dy5nb29nbGUuY24vbWFwcy9wcmV2aWV3L0Aje21hcC5sYXR9LCN7bWFwLmxuZ30sI3ttYXAuem9vbX16XCJcblxuICAgICAgICAgIGNvbnRlbnQuYXR0ciBcImhyZWZcIiwgbWFwLnVybFxuICAgICAgICAgIGNvbnRlbnQuYXR0ciBcInRhcmdldFwiLCBcIl9ibGFua1wiXG5cbiAgICAgICAgICBjb250ZW50LmFkZENsYXNzKFwibG9jYXRpb25cIikuY3NzXG4gICAgICAgICAgICB3aWR0aDogXCIje21hcC53aWR0aH1weFwiXG4gICAgICAgICAgICBoZWlnaHQ6IFwiI3ttYXAuaGVpZ2h0fXB4XCJcbiAgICAgICAgICAgIGJhY2tncm91bmRJbWFnZTogXCJ1cmwoI3ttYXAuaW1nfSlcIlxuXG4gICAgICAgICAgY29udGVudC5hcHBlbmQgJChcIjxkaXYvPlwiKS5hZGRDbGFzcyhcIm1hcmtlclwiKVxuICAgICAgICAgIGlmIG1hcC5hZGRyZXNzIHRoZW4gY29udGVudC5hcHBlbmQgJChcIjxkaXYvPlwiKS5hZGRDbGFzcyhcImFkZHJlc3NcIikuaHRtbCBtYXAuYWRkcmVzc1xuICAgICAgIyBFbmQgb2YgU3dpdGNoXG5cbiAgICAgIGVsZW1lbnQuYXBwZW5kVG8oXCIudGFibGVcIilcbiAgICAjIEVuZCBvZiBDb252ZXJzYXRpb24gTG9vcFxuXG5cblxuXG5cbiAgICAjIEltYWdlIEdhbGxlcnkgLSBDb252ZXJzYXRpb25cbiAgICAkKFwiLmNoYXQgLmJ1YmJsZSAuaW1hZ2VcIikub24gXCJ0YXBcIiwgLT5cbiAgICAgIG1zZ19wc3dwT3B0aW9ucyA9IHtcbiAgICAgICAgaW5kZXg6ICQoXCIuY2hhdCAuYnViYmxlIC5pbWFnZVwiKS5pbmRleCgkKHRoaXMpKVxuICAgICAgICBzaG93SGlkZU9wYWNpdHk6IHRydWVcbiAgICAgICAgaGlzdG9yeTogZmFsc2VcbiAgICAgICAgYmdPcGFjaXR5OiAwLjlcbiAgICAgICAgZ2V0VGh1bWJCb3VuZHNGbjogKGluZGV4KS0+XG4gICAgICAgICAgdGh1bWJuYWlsID0gJChcIi5jaGF0IC5idWJibGUgLmltYWdlXCIpW2luZGV4XVxuICAgICAgICAgIHBhZ2VZU2Nyb2xsID0gd2luZG93LnBhZ2VZT2Zmc2V0IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3BcbiAgICAgICAgICByZWN0ID0gdGh1bWJuYWlsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpXG4gICAgICAgICAgcmV0dXJuIHt4OnJlY3QubGVmdCwgeTpyZWN0LnRvcCArIHBhZ2VZU2Nyb2xsLCB3OnJlY3Qud2lkdGh9XG4gICAgICB9XG4gICAgICBtc2dfZ2FsbGVyeSA9IG5ldyBQaG90b1N3aXBlKCBwc3dwRWxlbWVudCwgUGhvdG9Td2lwZVVJX0RlZmF1bHQsIG1zZ19wc3dwSXRlbXMsIG1zZ19wc3dwT3B0aW9ucylcbiAgICAgIG1zZ19nYWxsZXJ5LmluaXQoKVxuXG5cblxuXG5cbiAgICAjIENsaWNrIGF2YXRhciBnb2VzIHRvIHByb2ZpbGVcbiAgICAkKFwiLmF2YXRhclwiKS5jbGljayAtPlxuICAgICAgdXNlcm5hbWUgPSAkKHRoaXMpLmF0dHIgXCJ1c2VybmFtZVwiXG4gICAgICBpZiB1c2VybmFtZSB0aGVuIHdpbmRvdy5vcGVuIFwiaHR0cHM6Ly9zb3llcC5jb20vXCIgKyB1c2VybmFtZVxuXG5cblxuXG5cbiAgICAjIFNob3cgYmx1ZSBwb3B1cCBidWJibGUgd2hlbiBzY3JvbGwgcmVhY2hlZCB0aGUgYm90dG9tIG9mIGNvbnZlcnNhdGlvbnNcbiAgICAkKGRvY3VtZW50KS5zY3JvbGwgLT5cbiAgICAgIGlmICQodGhpcykuc2Nyb2xsVG9wKCkgPj0gJCh0aGlzKS5oZWlnaHQoKSAtICQod2luZG93KS5oZWlnaHQoKSAtIDEwMFxuICAgICAgICAkKFwiLmZvb3RlciAucG9wdXBcIikuYWRkQ2xhc3MoXCJzaG93XCIpXG4gICAgICBlbHNlXG4gICAgICAgICQoXCIuZm9vdGVyIC5wb3B1cFwiKS5yZW1vdmVDbGFzcyhcInNob3dcIilcblxuXG5cblxuXG4gICAgIyBQbGF5ZXIgLSBWb2ljZVxuICAgICQoXCIuY2hhdCAuYnViYmxlIC5hdWRpb1wiKS5vbiBcInRhcFwiLCAtPlxuXG4gICAgICB2b2ljZSA9ICQubWVkaWEgJCh0aGlzKS5maW5kKFwiYXVkaW9cIilcbiAgICAgIGJ1dHRvbiA9ICQodGhpcykuZmluZChcImJ1dHRvblwiKVxuICAgICAgYmFyID0gJCh0aGlzKS5maW5kKFwicHJvZ3Jlc3NcIilcblxuICAgICAgdm9pY2UucGxheVBhdXNlKClcblxuICAgICAgdm9pY2UucGxheSAtPlxuICAgICAgICBidXR0b24uYWRkQ2xhc3MoXCJwbGF5aW5nXCIpXG5cbiAgICAgIHZvaWNlLnBhdXNlIC0+XG4gICAgICAgIGJ1dHRvbi5yZW1vdmVDbGFzcyhcInBsYXlpbmdcIilcblxuICAgICAgdm9pY2UuZW5kZWQgLT5cbiAgICAgICAgYnV0dG9uLnJlbW92ZUNsYXNzKFwicGxheWluZ1wiKVxuICAgICAgICB2b2ljZS5zdG9wKClcblxuICAgICAgdm9pY2UudGltZSAtPlxuICAgICAgICBwcm9ncmVzcyA9IG1vZHVsYXRlIHRoaXMudGltZSgpLCAwLCB0aGlzLmR1cmF0aW9uKCksIDAsIDEwMFxuICAgICAgICBiYXIuYXR0ciBcInZhbHVlXCIsIHByb2dyZXNzXG5cblxuXG5cblxuIyAtLS0gUkVTUE9OU0lWRSBMQVlPVVQgLS0tXG4gICQoXCIuYW5kcm9pZFwiKS5oaWRlKCkgaWYgb3MuaW9zXG4gICQoXCIuaW9zXCIpLmhpZGUoKSBpZiBvcy5hbmRyb2lkXG4iLG51bGxdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
